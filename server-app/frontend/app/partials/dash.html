<div id="page-dash" class="container container-fluid">
  <section id="facilities" ng-hide="facilities.length < 2">
    <p class="select-label">
      Facilities
      <a class="dc-tooltip" alt="You can browse data from all facilities because you are an administrator.">
        <i class="fa fa-info-circle"></i>
      </a>
    </p>
    <select ng-model="currentFacility" ng-change="fetchControllers()">
      <option ng-repeat="facility in facilities" value="{{facility.name}}">{{facility.name}}</option>
    </select>
  </section>
  <section id="controllers">
    <p class="select-label">Cabinets
      <a class="dc-tooltip" alt="Server cabinets with sensors installed at your facility. Select a cabinet to see climate data.">
        <i class="fa fa-info-circle"></i>
      </a>
    </p>
    <div ng-hide="controllerNameEditing">
      <select id="controller-select" ng-model="currentControllerIdx" ng-change="fetchDates()">
        <option ng-repeat="controller in controllers track by $index" value="{{$index}}" ng-selected="$first">{{controller.name}}</option>
      </select>
      <a id="edit-controller-name" ng-click="editController()" class="dc-tooltip" alt="Click to edit the name of this cabinet">
        <i class="fa fa-edit"></i>
      </a>
    </div>
    <div ng-hide="!controllerNameEditing">
      <input type="text" ng-model="newController.name" id="new-controller-name">
      <a id="edit-controller-name-submit" ng-click="commitController()" class="btn btn-success btn-sm"><i class="fa fa-save"></i> Save</a>
      <a id="edit-controller-name-cancel" ng-click="controllerNameEditing = false; newController = {}" class="btn btn-default btn-sm"><i class="fa fa-cancel"></i> Cancel</a>
      <div class="row">
        <div class="col-sm-2">
          <div class="input-group">
            <span class="input-group-btn">
              <button ng-click="newControllerWidthChange('dec')" class="btn btn-default" type="button"><i class="fa fa-minus"></i></button>
            </span>
            <input type="text" class="form-control" disabled placeholder="{{newController.width}}">
            <span class="input-group-btn">
              <button ng-click="newControllerWidthChange('inc')" class="btn btn-default" type="button"><i class="fa fa-plus"></i></button>
            </span>
          </div><!-- /input-group -->
        </div><!-- /.col-sm-2 -->
      </div><!-- /.row -->
    </div>
  </section>
  <section id="data-section">
    <p class="centered">{{formatDate(dates[dates.length - 1 - dateIdx])}}</p>
    <input type="range" ng-model="dateIdx" ng-change="currentDate = dates[dates.length - 1 - dateIdx]" min="0" max="5" id="date-slider">
    <ul>
      <li ng-repeat="reading in readings">{{reading.sensor_addr}}: {{CtoF(reading.temp)}}</li>
    </ul>
  </section>
  <button logout>Logout</button>
</div>
